{% extends 'base.html' %}

{% block title %}Main Status{% endblock %}

{% block content %}

<div class="modal fade" id="set-epg-option" tabindex="-1" role="dialog" aria-labelledby="set-epg-option-title" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="set-epg-option-title">Setting EPG</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			
			<form method="post" action="{% url 'main' %}">
				{% csrf_token %}
				<div class="modal-body">
					<div class="set-epg-option-wrap">
						{{ form.epg_id }}
						<div class="set-epg-qvlan-wrap">
							<label>Quarantine Vlan</label>
							{{ form.epg_qvlan }}
						</div>
						<div class="set-epg-enforce-wrap">
							<label>Enforcement</label>
							<span>
								<label class="slide-switch" for="id_epg_ac">
					    			{{ form.epg_ac }}
									<div class="slide-box round"></div>
								</label>
							</span>
						</div>
					</div>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
					<button type="submit" class="btn btn-primary">Save</button>
				</div>
			</form>
			
		</div>
	</div>
</div>

<div class="container-fluid">
	<h3>Endpoint Groups</h3>
	<table id="current-epg" class="table table-sm table-striped table-bordered adun-table" width="100%">
		<thead class="thead-dark">
			<tr>
				<th scope="col">EPG Path</th>
				<th scope="col">Enforce Mode</th>
				<th scope="col">Enforce Status</th>
				<th scope="col"></th>
			</tr>
		</thead>
	</table>
	
	<h3>Endpoints</h3>
	<table id="current-ep" class="table table-sm table-striped table-bordered adun_table" width="100%">
		<thead class="thead-dark">
			<tr>
				<th>EPG Path</th>
				<th>Path</th>
				<th>MAC</th>
				<th>IP</th>
				<th>Tracking Status</th>
				<th>Time Stamp</th>
				<th>Enforce</th>
			</tr>
		</thead>
	</table>

</div>

<style>
.btn-epg-option-wrap {
	width: 100%;
	text-align: center;
}
.btn-epg-option {
	padding: .1rem .2rem;
	font-size: .3rem;
}
.set-epg-option-wrap {
	width: 100%;
}
.set-epg-qvlan-wrap {
	width: 100%;
}
.set-epg-qvlan-wrap > input {
	float: right;
}
.set-epg-enforce-wrap {
	width: 100%;
}
.set-epg-enforce-wrap > span {
	float: right;
}
</style>

<script>
$(document).ready(function() {
    $("#current-epg").DataTable({"ajax": '/current/epg/'});
    $("#current-ep").DataTable({"ajax": '/current/ep/'});
});

function set_epg_option_value(obj) {
	$("#id_epg_id").val(obj.attr("epg_id"));
	$("#id_epg_qvlan").val(obj.attr("epg_qvlan"));	
	if ( obj.attr("epg_ac") == "true" ) {
		$("#id_epg_ac").prop("checked", true);
	} else {
		$("#id_epg_ac").prop("checked", false);
	}
};
</script>

{% endblock %}